

## 1.1并发和并行

对于很多人来说，它们没有什么区别。这两个词是用来描述硬件同时执行多个任务的方式，而“并行”更加注重性能。使用硬件提高数据处理速度时，会讨论程序的并行性。当关注重点在于任务分离或任务响应时，会讨论程序的并发性。这两个术语存在的目的，就是为了区别多线程中不同的关注点。

### 并发的方式

#### 多线程并发

优点：由于操作系统的保护，可以编写更加安全的并发代码；可以的多台机器上编写不同的进程，虽然增加了通信成本，但可以提高程序的并行性和性能。

缺点：通信往往比较复杂，或者速度很慢；运行多个进程会产生额外的开销。

#### 多进程并发：

优点：开销比较小，地址空间共享。

缺点：需要为数据同步付出较多的代价。

## 1.2 为什么使用并发

### 什么时候使用并发，为什么使用并发

- 分离关注点：以用户界面程序为例，可以在用户等待进度条的时候，在后台使用线程初始化数据；
- 性能：有两种方式，第一，将一个单个任务分成几部分并行运行，从而降低总运行时间，这就是任务并行；第二，每个线程在不同的数据块上执行相同的操作，这就是数据并行。

### 什么时候不使用并发

当收益比不上成本的时候，并发代码难以理解，随之带来的复杂性可能会引起更多的错误。线程资源有限，过多的线程同事运行，可能会耗尽操作系统资源（可使用线程池解决）

## 1.3  并发和多线程

c++11之前语言层面不支持并发，也没有统一的内存模型，在不同平台之间编写多线程应用比较困难，c++11新标准增加了内存模型以及语言层面的并发支持，c++14以及c++17增加了更多关于多线程的支持。

c++线程库也提供了native_handle()的接口函数来允许用户调用平台相关的API直接操作底层实现。